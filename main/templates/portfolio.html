{% extends 'base.html' %}
{%load static%}

{%block style%}
    <link rel="stylesheet" type="text/css" href="{%static 'css/portfolio.css'%}" />
{%endblock%}

{%block content%} 
    <section id="portfolio-page" class="big-container">
        <h2>Главные проекты</h2>
        <div class="portfolio-items">
            <div class="portfolio-item position-relative d-flex">
                <div class="portfolio-item-desc-left d-flex flex-column justify-content-between h-100 text-end">
                    <div class="top-left">
                        архитектура <br>
                        и инженерия
                    </div>
                    <div class="bottom-left">
                        Владивосток, Россия
                    </div>
                </div>
                <img src="{%static 'img/2.webp'%}" alt="">
                <div class="portfolio-item-desc-right d-flex flex-column justify-content-between h-100 text-start">
                    <div class="top-left">
                        жилой комплекс Тихвинский
                    </div>
                    <div class="bottom-left">
                        Реализация
                    </div>
                </div>
            </div>
            <div class="portfolio-item position-relative">
                <div class="portfolio-item-desc-left d-flex flex-column justify-content-between h-100 text-end">
                    <div class="top-left">
                        архитектура <br>
                        и инженерия
                    </div>
                    <div class="bottom-left">
                        Дахла, Западная Сахара
                    </div>
                </div>
                <img src="{%static 'img/4.webp'%}" alt="">
                <div class="portfolio-item-desc-right d-flex flex-column justify-content-between h-100 text-start">
                    <div class="top-left">
                        университет Дахла
                    </div>
                    <div class="bottom-left">
                        Концепция
                    </div>
                </div>
            </div>
            <div class="portfolio-item position-relative">
                <div class="portfolio-item-desc-left d-flex flex-column justify-content-between h-100 text-end">
                    <div class="top-left">
                        архитектура <br>
                        и инженерия
                    </div>
                    <div class="bottom-left">
                        Владивосток, Россия
                    </div>
                </div>
                <img src="{%static 'img/3.webp'%}" alt="">
                <div class="portfolio-item-desc-right d-flex flex-column justify-content-between h-100 text-start">
                    <div class="top-left">
                       вилла Дефриз
                    </div>
                    <div class="bottom-left">
                        Концепция
                    </div>
                </div>
            </div>
            <div class="portfolio-item position-relative">
                <div class="portfolio-item-desc-left d-flex flex-column justify-content-between h-100 text-end">
                    <div class="top-left">
                        архитектура <br>
                        и инженерия
                    </div>
                    <div class="bottom-left">
                        Марракеш, Морроко
                    </div>
                </div>
                <img src="{%static 'img/5.webp'%}" alt="">
                <div class="portfolio-item-desc-right d-flex flex-column justify-content-between h-100 text-start">
                    <div class="top-left">
                        университет Марракеш
                    </div>
                    <div class="bottom-left">
                        Концепция
                    </div>
                </div>
            </div>
            <div class="portfolio-item position-relative">
                <div class="portfolio-item-desc-left d-flex flex-column justify-content-between h-100 text-end">
                    <div class="top-left">
                        благоустройство
                    </div>
                    <div class="bottom-left">
                        Владивосток, Россия
                    </div>
                </div>
                <img src="{%static 'img/9.webp'%}" alt="">
                <div class="portfolio-item-desc-right d-flex flex-column justify-content-between h-100 text-start">
                    <div class="top-left">
                        жилой комплекс Тихвинский
                    </div>
                    <div class="bottom-left">
                        Реализация
                    </div>
                </div>
            </div>
            <div class="portfolio-item position-relative">
                <div class="portfolio-item-desc-left d-flex flex-column justify-content-between h-100 text-end">
                    <div class="top-left">
                        архитектура <br>
                        и инженерия
                    </div>
                    <div class="bottom-left">
                        Бали, Индонезия
                    </div>
                </div>
                <img src="{%static 'img/10.webp'%}" alt="">
                <div class="portfolio-item-desc-right d-flex flex-column justify-content-between h-100 text-start">
                    <div class="top-left">
                        комплекс апартаментов Елизиум
                    </div>
                    <div class="bottom-left">
                        Реализация
                    </div>
                </div>
            </div>
        </div>
        <h2>Все проекты</h2>
        <table class="table">
            <thead>
                <tr class="font-weight-bold">
                    <th scope="col" class="text-end">наименование</th>
                    <th scope="col">направление</th>
                    <th scope="col">локация</th>
                    <th scope="col" class="text-end">статус</th>
                    <th scope="col">площадь</th>
                    <th scope="col">год</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th class="text-end">ЖК Тихвинский</th>
                    <td>квартирография</td>
                    <td>Владивосток, Россия</td>
                    <td class="text-end">реализован</td>
                    <td>14 980 м<sup>2</sup></td>
                    <td>2024</td>
                </tr>
                <tr>
                    <th class="text-end">комплекс вилл Edem</th>
                    <td>архитектура и инженерия</td>
                    <td>Бали, Индонезия</td>
                    <td class="text-end">комплекс вилл Едем</td>
                    <td>35 640 м<sup>2</sup></td>
                    <td>2024</td>
                </tr>
                <tr>
                    <th class="text-end">ижс Прибрежная</th>
                    <td>архитектура и инженерия</td>
                    <td>Владивосток, Россия</td>
                    <td class="text-end">реализован</td>
                    <td>210 м<sup>2</sup></td>
                    <td>2017</td>
                </tr>
                <tr>
                    <th class="text-end">Air Mall</th>
                    <td>архитектура и инженерия</td>
                    <td>Владивосток, Россия</td>
                    <td class="text-end">концепция</td>
                    <td>56 440 м<sup>2</sup></td>
                    <td>2018</td>
                </tr>
                <tr class="font-weight-bold">
                    <th class="text-end">апартаменты Elysium</th>
                    <td>архитектура и инженерия</td>
                    <td>Бали, Индонезия</td>
                    <td class="text-end">реализация</td>
                    <td>36 270 м<sup>2</sup></td>
                    <td>2024</td>
                </tr>
                <tr>
                    <th class="text-end">медцентр Plastec</th>
                    <td>архитектура и инженерия</td>
                    <td>Владивосток, Россия</td>
                    <td class="text-end">реализация</td>
                    <td>3 580 м<sup>2</sup></td>
                    <td>2023</td>
                </tr>
                <tr>
                    <th class="text-end">озеро Сердце Патрокла</th>
                    <td>архитектура и инженерия</td>
                    <td>Владивосток, Россия</td>
                    <td class="text-end">концепция</td>
                    <td>2 506 м<sup>2</sup></td>
                    <td>2023</td>
                </tr>
                <tr class="font-weight-bold">
                    <th class="text-end">ЖК Тихвинский</th>
                    <td>архитектура и инженерия</td>
                    <td>Владивосток, Россия</td>
                    <td class="text-end">реализация</td>
                    <td>14 980 м<sup>2</sup></td>
                    <td>2022</td>
                </tr>
                <tr>
                    <th class="text-end">жилой комплекс ТАММ</th>
                    <td>цифровая модель</td>
                    <td>Владивосток, Россия</td>
                    <td class="text-end">реализован</td>
                    <td>23 770 м<sup>2</sup></td>
                    <td>2023</td>
                </tr>
                <tr class="font-weight-bold">
                    <th class="text-end">университет Марракеш</th>
                    <td>архитектура и инженерия</td>
                    <td>Марракеш, Морокко</td>
                    <td class="text-end">концепция</td>
                    <td>289 450 м<sup>2</sup></td>
                    <td>2020</td>
                </tr>
                <tr>
                    <th class="text-end">соцжилье Агадир</th>
                    <td>архитектура и инженерия</td>
                    <td>Агадир, Морроко</td>
                    <td class="text-end">реализация</td>
                    <td>54 350 м<sup>2</sup></td>
                    <td>2020</td>
                </tr>
                <tr>
                    <th class="text-end">средняя школа 1600</th>
                    <td>архитектура и инженерия</td>
                    <td>Москва, Россия</td>
                    <td class="text-end">реализация</td>
                    <td>23 833 м<sup>2</sup></td>
                    <td>2023</td>
                </tr>
                <tr class="font-weight-bold">
                    <th class="text-end">ЖК Тихвинский</th>
                    <td>благоустройство</td>
                    <td>Владивосток, Россия</td>
                    <td class="text-end">реализация</td>
                    <td>1 834 м<sup>2</sup></td>
                    <td>2025</td>
                </tr>
            </tbody>
        </table>

    </section>

{%endblock%}

{%block script%}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const modalContainer = document.getElementById('modalContainer');
        const modalSlider = document.getElementById('modalSlider');
        const cursor = document.getElementById('cursor');
        const projects = document.querySelectorAll('.portfolio-item');

        let active = false;

        // Расчет координат при движении курсора
        const xMoveContainer = gsap.quickTo(modalContainer, 'left', { duration: 0.8, ease: 'power3' });
        const yMoveContainer = gsap.quickTo(modalContainer, 'top', { duration: 0.8, ease: 'power3' });

        const xMoveCursor = gsap.quickTo(cursor, 'left', { duration: 0.5, ease: 'power3' });
        const yMoveCursor = gsap.quickTo(cursor, 'top', { duration: 0.5, ease: 'power3' });


        window.addEventListener('mousemove', (e) => {
            if (!active) return; 
            const { pageX, pageY } = e;
            
            xMoveContainer(pageX);
            yMoveContainer(pageY);

            xMoveCursor(pageX);
            yMoveCursor(pageY);
        });
        
        //При наведении на портфолио итемы меняем картинку
        projects.forEach((item, index) => {
            item.addEventListener('mouseenter', () => {
                updateModalSlider(index);
            });

            item.addEventListener('mouseleave', () => {

                updateModalSlider(index);

            });
        });


        // При наведении на родительский блок убираем/показываем модальное окно
        document.querySelector('.portfolio-items').addEventListener('mouseleave', () => {
            toggleModal()
        });

        document.querySelector('.portfolio-items').addEventListener('mouseenter', () => {
            toggleModal()
        });


        // Изменение фото
        function updateModalSlider(index) {
            modalSlider.style.top = `${index * -100}%`;
        }

        // Скрытие/показ модального окна
        function toggleModal() {
            active = !active;

            if (active) {
                modalContainer.style.transition = "all 0.4s ease";
                modalContainer.style.opacity = 1;
                modalContainer.style.transform = "translate(-50%, -50%) scale(1)";
                cursor.style.opacity = 1;
            } else {
                modalContainer.style.opacity = 0;
                modalContainer.style.transform = "translate(-50%, -50%) scale(0)";
                cursor.style.opacity = 0;
            }
        }
    });

</script>
{%endblock%}